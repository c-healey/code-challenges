(this["webpackJsonpsepta-fare-calculator"]=this["webpackJsonpsepta-fare-calculator"]||[]).push([[0],{22:function(e,t,n){},23:function(e,t,n){},24:function(e,t,n){},25:function(e,t,n){},26:function(e,t,n){},46:function(e,t,n){"use strict";n.r(t);var c=n(1),a=n.n(c),r=n(14),s=n.n(r),i=n(2),l=n(0),u=a.a.createContext(),o="zones",j="when",b="purchase",d=function(e){var t=Object(c.useState)(0),n=Object(i.a)(t,2),a=n[0],r=n[1],s=Object(c.useState)(0),o=Object(i.a)(s,2),j=o[0],b=o[1],d=Object(c.useState)(null),O=Object(i.a)(d,2),f=O[0],h=O[1],v=Object(c.useState)("1"),p=Object(i.a)(v,2),x=p[0],m=p[1],N=Object(c.useState)(null),y=Object(i.a)(N,2),g={zones:[a,r],when:[j,b],purchase:[f,h],quantity:[x,m],faredata:[y[0],y[1]]};return Object(l.jsx)(u.Provider,{value:g,children:e.children})},O=(n(22),function(){var e=Object(i.a)(Object(c.useContext)(u).faredata,1)[0],t=Object(i.a)(Object(c.useContext)(u).zones,1)[0],n=Object(i.a)(Object(c.useContext)(u).when,1)[0],a=Object(i.a)(Object(c.useContext)(u).purchase,1)[0],r=Object(i.a)(Object(c.useContext)(u).quantity,1)[0],s=Object(c.useState)(0),o=Object(i.a)(s,2),j=o[0],b=o[1],d=Object(c.useState)({}),O=Object(i.a)(d,2),f=O[0],h=O[1],v=Object(c.useState)("Anytime tickets are available through Advanced Purchase only."),p=Object(i.a)(v,2),x=p[0],m=p[1];return Object(c.useEffect)((function(){if(0===r.length)b(0),m("Enter a number between 1 and 100");else if(null!==t.value&&n.value&&a&&a.value&&r){if(0===Object.keys(f).length){var c={};e.zones.map((function(e,t){c[e.zone]||(c[e.zone]={},e.fares.forEach((function(t){c[e.zone][t.type]||(c[e.zone][t.type]={}),c[e.zone][t.type][t.purchase]={trips:t.trips,price:t.price}})))})),h(c)}if(0!==Object.keys(f).length)if(f[t.value+1][n.value][a.value]){var s=f[t.value+1][n.value][a.value].price*+r;b(s)}else b(0)}}),[f,e,t,n,a,r,j]),Object(l.jsxs)("div",{children:[Object(l.jsx)("h3",{children:"Your fare will cost"}),Object(l.jsx)("div",{className:j?"calc-fare calc-footer-total":"",children:"".concat(j?"$ "+j:x)})]})}),f=(n(23),function(e){var t=e.label,n=e.options,a=e.contextName,r=Object(i.a)(Object(c.useContext)(u)[a],2),s=r[0],o=r[1],j=Object(c.useState)(!1),b=Object(i.a)(j,2),d=b[0],O=b[1],f=Object(c.useRef)();Object(c.useEffect)((function(){o(n[0]);var e=function(e){f.current&&f.current.contains(e.target)||O(!1)};return document.body.addEventListener("click",e),function(){document.body.removeEventListener("click",e)}}),[n]);return Object(l.jsx)("div",{ref:f,className:"uid formd",children:Object(l.jsxs)("div",{className:"fieldd",children:[Object(l.jsx)("h3",{className:"label",children:t}),Object(l.jsxs)("div",{onClick:function(){return O(!d)},className:"dropdown-selection ".concat(d?"visible active":""),children:[Object(l.jsx)("div",{className:"dropdown-text",children:s.label}),Object(l.jsx)("i",{className:"dropdown icon"}),Object(l.jsx)("i",{className:"dropdown-icon"}),Object(l.jsx)("div",{className:"dropdown-menu ".concat(d?"visible transition":""),children:n.map((function(e){return e.value===s.value?null:Object(l.jsx)("div",{className:"dropdown-item",onClick:function(){return o(e)},children:e.label},e.value)}))})]})]})})}),h=(n(24),function(e){var t=e.label,n=e.options,a=e.contextName,r=Object(i.a)(Object(c.useContext)(u)[a],2),s=r[0],o=r[1];Object(c.useEffect)((function(){o(n[0])}),[]);return Object(l.jsxs)("div",{className:"flex-column-center",children:[Object(l.jsx)("h3",{children:t}),function(e,t){var n=e.map((function(e,n){return Object(l.jsxs)("div",{children:[Object(l.jsx)("input",{type:"radio",name:t,id:e.value,checked:s?e.value===s.value?"checked":"":0===n?"checked":"",onChange:function(){return o(e)}}),Object(l.jsx)("label",{className:"radio-button-label",htmlFor:e.value,children:e.label})]},n)}));return Object(l.jsx)("div",{className:"radio-button-options",children:n})}(n)]})}),v=(n(25),function(e){var t=e.label,n=Object(i.a)(Object(c.useContext)(u).quantity,2),a=n[0],r=n[1];return Object(l.jsx)("div",{children:Object(l.jsx)("div",{className:"ui formd",children:Object(l.jsxs)("div",{className:"fieldd",children:[Object(l.jsx)("h3",{children:t}),Object(l.jsx)("input",{type:"number",min:"1",max:"100",placeholder:"Enter a number between 1 and 100",value:a,onChange:function(e){return t=e.target.value,!isNaN(t)&&null===t.match(/[^0-9]/g)&&+t<=100?r(e.target.value):r("");var t}})]})})})}),p=[{label:"Loading...",value:0}],x=(n(26),n(5)),m=n.n(x),N=n(15),y=n(16),g=n.n(y),w=function(e,t){(function(){var n=Object(N.a)(m.a.mark((function n(c){var a,r;return m.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,g.a.get(e);case 3:a=n.sent,(r=a.data)&&t(r),n.next=11;break;case 8:n.prev=8,n.t0=n.catch(0),console.log(n.t0);case 11:case"end":return n.stop()}}),n,null,[[0,8]])})));return function(e){return n.apply(this,arguments)}})()(e)},k=function(e){return e.split("_").map((function(e){return e.charAt(0).toUpperCase()+e.slice(1)})).join(" ")},C=function(){var e=Object(i.a)(Object(c.useContext)(u).faredata,2),t=e[0],n=e[1],a=Object(c.useState)(null),r=Object(i.a)(a,2),s=r[0],d=r[1],x=Object(c.useState)(null),m=Object(i.a)(x,2),N=m[0],y=m[1],g=Object(c.useState)(null),C=Object(i.a)(g,2),S=C[0],z=C[1];Object(c.useEffect)((function(){null===t?w("https://c-healey.github.io/data/fares.json",n):null===s&&E(t)}),[t]);var E=function(e){!function(e){var t=e.zones.map((function(e,t){return{label:e.name,value:t}}));d(t)}(e),function(e){var t={},n={};e.map((function(e){e.fares.filter((function(e){t[e.type]||(t[e.type]=k(e.type)),n[e.purchase]||(n[e.purchase]=k(e.purchase))}))}));var c=Object.entries(t).map((function(e){return{label:e[1],value:e[0]}}));y(c);var a=Object.entries(n).map((function(e){return{label:e[1],value:e[0]}}));z(a)}(e.zones)};return Object(l.jsxs)("div",{className:"ui container rail-fares",children:[Object(l.jsx)("section",{className:"header",children:Object(l.jsx)("h1",{children:"Regional Rail Fares"})}),Object(l.jsxs)("section",{className:"content",children:[Object(l.jsx)("div",{className:"input-container",children:Object(l.jsx)(f,{label:"Where are you going?",options:null!==s?s:p,contextName:o})}),Object(l.jsxs)("div",{className:"input-container",children:[Object(l.jsx)(f,{label:"When are you riding?",options:null!==N?N:p,contextName:j}),"Anytime tickets are available through Advanced Purchase only and are good for 10 rides."]}),Object(l.jsx)("div",{className:"input-container",children:null!==S?Object(l.jsx)(h,{label:"Where will you purchase the fare?",options:S,contextName:b}):Object(l.jsx)("div",{})}),Object(l.jsx)("div",{className:"input-container",children:Object(l.jsx)(v,{label:"How many rides will you need?"})}),Object(l.jsx)("div",{className:"footer",children:Object(l.jsx)(O,{})})]})]})};s.a.render(Object(l.jsx)(d,{children:Object(l.jsx)(C,{})}),document.querySelector("#root"))}},[[46,1,2]]]);
//# sourceMappingURL=main.167679cd.chunk.js.map